import{a as $,r as d,j as e}from"./index-DNxpbptG.js";const q=()=>{const{trainers:y,dispatchTrainers:x,TRAINER_ACTIONS:u,sessions:k}=$(),[E,r]=d.useState(!1),[n,N]=d.useState(null),[j,T]=d.useState(""),[l,h]=d.useState({name:"",employeeId:"",email:"",phone:"",skill:""}),[t,b]=d.useState({}),[i,g]=d.useState(!1),[f,v]=d.useState(null),m=()=>{h({name:"",employeeId:"",email:"",phone:"",skill:""}),N(null),b({})},S=()=>{m(),r(!0)},C=s=>{h(s),N(s),r(!0)},w=()=>{const s={};return l.name.trim()?l.name.trim().length<2&&(s.name="Name must be at least 2 characters"):s.name="Name is required",l.employeeId.trim()?y.some(p=>p.employeeId===l.employeeId&&p.id!==(n==null?void 0:n.id))&&(s.employeeId="Employee ID already exists"):s.employeeId="Employee ID is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(s.email="Invalid email format"):s.email="Email is required",l.phone.trim()?/^\d{10}$/.test(l.phone.replace(/[-\s]/g,""))||(s.phone="Phone must be 10 digits"):s.phone="Phone is required",l.skill.trim()||(s.skill="Skill is required"),b(s),Object.keys(s).length===0},c=(s,a="success")=>{v({message:s,type:a}),setTimeout(()=>v(null),3e3)},D=async s=>{if(s.preventDefault(),!!w()){g(!0);try{n?(x({type:u.UPDATE_TRAINER,payload:{...l,id:n.id}}),c("Trainer updated successfully!")):(x({type:u.ADD_TRAINER,payload:l}),c("Trainer added successfully!")),r(!1),m()}catch{c("An error occurred. Please try again.","error")}finally{g(!1)}}},A=s=>{window.confirm("Delete this trainer?")&&(x({type:u.DELETE_TRAINER,payload:s}),c("Trainer deleted successfully!"))},o=s=>{const{name:a,value:p}=s.target;h({...l,[a]:p}),t[a]&&b({...t,[a]:""})},R=s=>k.filter(a=>a.trainerId===s).length,I=y.filter(s=>s.name.toLowerCase().includes(j.toLowerCase()));return e.jsxs("div",{className:"space-y-4",children:[f&&e.jsx("div",{className:`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${f.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:f.message}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Trainers"}),e.jsx("button",{onClick:S,className:"btn btn-primary",children:"Add Trainer"})]}),e.jsx("input",{type:"text",value:j,onChange:s=>T(s.target.value),placeholder:"Search trainers...",className:"w-full px-4 py-2 border rounded-lg"}),I.length===0?e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No trainers found"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(s=>e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["ID: ",s.employeeId]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s.email}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.phone}),e.jsxs("p",{className:"text-sm font-medium mb-3",children:["Skills: ",s.skill]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[R(s.id)," sessions assigned"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(s),className:"btn btn-outline btn-sm flex-1",children:"Edit"}),e.jsx("button",{onClick:()=>A(s.id),className:"btn btn-danger btn-sm flex-1",children:"Delete"})]})]},s.id))}),E&&e.jsx("div",{className:"modal-overlay",onClick:()=>{r(!1),m()},children:e.jsxs("div",{className:"modal-panel",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{className:"font-semibold",children:n?"Edit Trainer":"Add Trainer"}),e.jsx("button",{className:"text-slate-600",onClick:()=>{r(!1),m()},children:"Ã—"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:D,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:o,className:`w-full px-3 py-2 border rounded-lg ${t.name?"border-red-500":""}`,disabled:i}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Employee ID"}),e.jsx("input",{type:"text",name:"employeeId",value:l.employeeId,onChange:o,className:`w-full px-3 py-2 border rounded-lg ${t.employeeId?"border-red-500":""}`,disabled:i}),t.employeeId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.employeeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:o,className:`w-full px-3 py-2 border rounded-lg ${t.email?"border-red-500":""}`,disabled:i}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:o,className:`w-full px-3 py-2 border rounded-lg ${t.phone?"border-red-500":""}`,disabled:i}),t.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Skill"}),e.jsx("input",{type:"text",name:"skill",value:l.skill,onChange:o,className:`w-full px-3 py-2 border rounded-lg ${t.skill?"border-red-500":""}`,placeholder:"e.g., React & JavaScript",disabled:i}),t.skill&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.skill})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline flex-1",onClick:()=>{r(!1),m()},disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary flex-1",disabled:i,children:i?"Saving...":n?"Update":"Add"})]})]})})]})})]})};export{q as default};
